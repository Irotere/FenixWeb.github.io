window.scrollReveal=function(n){"use strict";function t(t){this.docElem=n.document.documentElement,this.options=this.extend(this.defaults,t),this.styleBank={},1==this.options.init&&this.init()}var r=1,e=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||function(t){n.setTimeout(t,1e3/60)};return t.prototype={defaults:{after:"0s",enter:"bottom",move:"24px",over:"0.66s",easing:"ease-in-out",opacity:0,viewportFactor:.33,reset:!1,init:!0},init:function(){this.scrolled=!1;var o=this;this.elems=Array.prototype.slice.call(this.docElem.querySelectorAll("[data-scroll-reveal]")),this.elems.forEach(function(t,e){var i=t.getAttribute("data-scroll-reveal-id");i||(i=r++,t.setAttribute("data-scroll-reveal-id",i)),o.styleBank[i]||(o.styleBank[i]=t.getAttribute("style")),o.update(t)});n.addEventListener("scroll",function(t){o.scrolled||(o.scrolled=!0,e(function(){o._scrollPage()}))},!1),n.addEventListener("resize",function(){o.resizeTimeout&&clearTimeout(o.resizeTimeout),o.resizeTimeout=setTimeout(function(){o._scrollPage(),o.resizeTimeout=null},200)},!1)},_scrollPage:function(){var i=this;this.elems.forEach(function(t,e){i.update(t)}),this.scrolled=!1},parseLanguage:function(t){var i,o,r=t.getAttribute("data-scroll-reveal").split(/[, ]+/),s={};return i=[],o=["from","the","and","then","but","with"],r.forEach(function(t,e){-1<o.indexOf(t)||i.push(t)}),(r=i).forEach(function(t,e){switch(t){case"enter":return void(s.enter=r[e+1]);case"after":case"wait":return void(s.after=r[e+1]);case"move":return void(s.move=r[e+1]);case"ease":return s.move=r[e+1],void(s.ease="ease");case"ease-in":return s.move=r[e+1],void(s.easing="ease-in");case"ease-in-out":return s.move=r[e+1],void(s.easing="ease-in-out");case"ease-out":return s.move=r[e+1],void(s.easing="ease-out");case"over":return void(s.over=r[e+1]);default:return}}),s},update:function(t){var e=this.genCSS(t),i=this.styleBank[t.getAttribute("data-scroll-reveal-id")];return null!=i?i+=";":i="",t.getAttribute("data-scroll-reveal-initialized")||(t.setAttribute("style",i+e.initial),t.setAttribute("data-scroll-reveal-initialized",!0)),this.isElementInViewport(t,this.options.viewportFactor)?!t.getAttribute("data-scroll-reveal-complete")&&this.isElementInViewport(t,this.options.viewportFactor)?(t.setAttribute("style",i+e.target+e.transition),void(this.options.reset||setTimeout(function(){""!=i?t.setAttribute("style",i):t.removeAttribute("style"),t.setAttribute("data-scroll-reveal-complete",!0)},e.totalDuration))):void 0:void(this.options.reset&&t.setAttribute("style",i+e.initial+e.reset))},genCSS:function(t){var e,i=this.parseLanguage(t);i.enter?("top"!=i.enter&&"bottom"!=i.enter||(s=i.enter,e="y"),"left"!=i.enter&&"right"!=i.enter||(s=i.enter,e="x")):("top"!=this.options.enter&&"bottom"!=this.options.enter||(s=this.options.enter,e="y"),"left"!=this.options.enter&&"right"!=this.options.enter||(s=this.options.enter,e="x")),"top"!=s&&"left"!=s||(i.move?i.move="-"+i.move:i.move="-"+this.options.move);var o=i.move||this.options.move,r=i.over||this.options.over,t=i.after||this.options.after,s=i.easing||this.options.easing;return{transition:"-webkit-transition: -webkit-transform "+r+" "+s+" "+t+",  opacity "+r+" "+s+" "+t+";transition: transform "+r+" "+s+" "+t+", opacity "+r+" "+s+" "+t+";-webkit-perspective: 1000;-webkit-backface-visibility: hidden;",initial:"-webkit-transform: translate"+e+"("+o+");transform: translate"+e+"("+o+");opacity: "+(i.opacity||this.options.opacity)+";",target:"-webkit-transform: translate"+e+"(0);transform: translate"+e+"(0);opacity: 1;",reset:"-webkit-transition: -webkit-transform "+r+" "+s+" 0s,  opacity "+r+" "+s+" "+t+";transition: transform "+r+" "+s+" 0s,  opacity "+r+" "+s+" "+t+";-webkit-perspective: 1000;-webkit-backface-visibility: hidden;",totalDuration:1e3*(parseFloat(r)+parseFloat(t))}},getViewportH:function(){var t=this.docElem.clientHeight,e=n.innerHeight;return t<e?e:t},getOffset:function(t){for(var e=0,i=0;isNaN(t.offsetTop)||(e+=t.offsetTop),isNaN(t.offsetLeft)||(i+=t.offsetLeft),t=t.offsetParent;);return{top:e,left:i}},isElementInViewport:function(t,e){var i=n.pageYOffset,o=i+this.getViewportH(),r=t.offsetHeight,s=this.getOffset(t).top;return s+r*(e=e||0)<=o&&i<=s+r||"fixed"==(t.currentStyle||n.getComputedStyle(t,null)).position},extend:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}},t}(window);